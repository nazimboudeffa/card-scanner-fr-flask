<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Scan d'image - Hash perceptuel</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <meta name="theme-color" content="#4f8cff">
</head>
<body>
  <div class="container grid layout">
    <div class="left grid" style="gap: 18px;">
      <header class="header">
        <h1>
          üì∏ Scan d'image <span class="muted">(pHash / dHash / aHash / wHash)</span>
        </h1>
        <nav>
          <a class="link subtle" href="/info" title="Informations">Infos</a>
        </nav>
      </header>

      <section class="controls card">
        <div class="field">
          <label for="hash_type">Type de hash</label>
          <select id="hash_type" aria-label="Type de hash">
            <option value="phash">pHash</option>
            <option value="dhash">dHash</option>
            <option value="ahash">aHash</option>
            <option value="whash">wHash</option>
          </select>
        </div>

        <div class="field">
          <label for="hash_size">Taille du hash</label>
          <input type="number" id="hash_size" value="16" min="4" max="32" aria-label="Taille du hash">
        </div>

        <div class="field">
          <label for="max_distance">Distance max</label>
          <input type="number" id="max_distance" value="150" min="0" max="500" aria-label="Distance maximale">
        </div>

        <button id="capture" class="btn primary" aria-label="Capturer une image">Capturer</button>
        <button id="switch_camera" class="btn ghost" type="button">Changer cam√©ra</button>
        <button id="load_image" class="btn ghost" type="button">Charger une image</button>
        <input type="file" id="file_input" accept="image/*" style="display:none;">
      </section>

      <section class="preview">
        <div class="video-wrap card">
          <div class="kicker" style="padding: 10px 12px 2px;">
            <span class="dot"></span> Aper√ßu cam√©ra
          </div>
          <div class="spacer"></div>
          <div class="video-frame">
            <video id="video" width="400" height="300" autoplay playsinline aria-label="Flux cam√©ra"></video>
            <canvas id="canvas" width="400" height="300" style="display:none;"></canvas>
          </div>
        </div>

        <div class="captured-wrap card" id="captured_wrap" style="display:none;">
          <div class="kicker" style="padding: 10px 12px 2px;">
            üì∏ Image captur√©e
          </div>
          <div class="spacer"></div>
          <div class="video-frame">
            <img id="captured_image" alt="Captur√©e" style="display:block; width:100%; height:auto; object-fit: contain; background: #000; border-radius: 12px;">
          </div>
        </div>

        <p id="result" class="result card" aria-live="polite" aria-atomic="true" style="min-height: 48px; margin: 0;">
          ‚ÑπÔ∏è Les r√©sultats s'afficheront ici apr√®s la capture. Le hash calcul√© et les correspondances.
        </p>
      </section>
    </div>
  </div>

  <script type="module" src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>